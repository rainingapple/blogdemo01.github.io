<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"rainingapple.cn","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="话不多说先看题 7-4 Replacement Selection (30分) When the input is much too large to fit into memory, we have to do external sorting instead of internal sorting. One of the key steps in external sorting is to">
<meta property="og:type" content="article">
<meta property="og:title" content="PAT甲级2020春04题解">
<meta property="og:url" content="http://rainingapple.cn/2020/09/27/PAT%E7%94%B2%E7%BA%A72020%E6%98%A504%E9%A2%98%E8%A7%A3/index.html">
<meta property="og:site_name" content="rainingappleMK">
<meta property="og:description" content="话不多说先看题 7-4 Replacement Selection (30分) When the input is much too large to fit into memory, we have to do external sorting instead of internal sorting. One of the key steps in external sorting is to">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-09-27T02:32:23.000Z">
<meta property="article:modified_time" content="2020-09-27T12:14:50.381Z">
<meta property="article:author" content="rainingapple">
<meta property="article:tag" content="PAT甲级">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://rainingapple.cn/2020/09/27/PAT%E7%94%B2%E7%BA%A72020%E6%98%A504%E9%A2%98%E8%A7%A3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>PAT甲级2020春04题解 | rainingappleMK</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
    <div class="headband"></div>
    <a target="_blank" rel="noopener" href="https://github.com/rainingapple" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">rainingappleMK</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rainingapple.cn/2020/09/27/PAT%E7%94%B2%E7%BA%A72020%E6%98%A504%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rainingapple">
      <meta itemprop="description" content="划水也要划得自在">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rainingappleMK">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          PAT甲级2020春04题解
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-09-27 10:32:23 / 修改时间：20:14:50" itemprop="dateCreated datePublished" datetime="2020-09-27T10:32:23+08:00">2020-09-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/PAT%E7%94%B2%E7%BA%A7/" itemprop="url" rel="index"><span itemprop="name">PAT甲级</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>话不多说先看题</p>
<p>7-4 Replacement Selection (30分)</p>
<p>When the input is much too large to fit into memory, we have to do <strong>external sorting</strong> instead of internal sorting. One of the key steps in external sorting is to generate sets of sorted records (also called <strong>runs</strong>) with limited internal memory. The simplest method is to read as many records as possible into the memory, and sort them internally, then write the resulting run back to some tape. The size of each run is the same as the capacity of the internal memory.</p>
<a id="more"></a>

<p><strong>Replacement Selection</strong> sorting algorithm was described in 1965 by Donald Knuth. Notice that as soon as the first record is written to an output tape, the memory it used becomes available for another record. Assume that we are sorting in ascending order, if the next record is not smaller than the record we have just output, then it can be included in the run.</p>
<p>For example, suppose that we have a set of input { 81, 94, 11, 96, 12, 99, 35 }, and our memory can sort 3 records only. By the simplest method we will obtain three runs: { 11, 81, 94 }, { 12, 96, 99 } and { 35 }. According to the replacement selection algorithm, we would read and sort the first 3 records { 81, 94, 11 } and output 11 as the smallest one. Then one space is available so 96 is read in and will join the first run since it is larger than 11. Now we have { 81, 94, 96 }. After 81 is out, 12 comes in but it must belong to the next run since it is smaller than 81. Hence we have { 94, 96, 12 } where 12 will stay since it belongs to the next run. When 94 is out and 99 is in, since 99 is larger than 94, it must belong to the <strong>first run</strong>. Eventually we will obtain two runs: the first one contains { 11, 81, 94, 96, 99 } and the second one contains { 12, 35 }.</p>
<p>Your job is to implement this replacement selection algorithm.</p>
<h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains several test cases. The first line gives two positive integers <em>N</em> (≤105) and <em>M</em> (&lt;<em>N</em>/2), which are the total number of records to be sorted, and the capacity of the internal memory. Then <em>N</em> numbers are given in the next line, all in the range of <strong>int</strong>. All the numbers in a line are separated by a space.</p>
<h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each test case, print in each line a run (in ascending order) generated by the replacement selection algorithm. All the numbers in a line must be separated by exactly 1 space, and there must be no extra space at the beginning or the end of the line.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">13 3</span><br><span class="line">81 94 11 96 12 99 17 35 28 58 41 75 15</span><br></pre></td></tr></table></figure>

<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">11 81 94 96 99</span><br><span class="line">12 17 28 35 41 58 75</span><br><span class="line">15</span><br></pre></td></tr></table></figure>

<h2 id="题目解释："><a href="#题目解释：" class="headerlink" title="题目解释："></a>题目解释：</h2><h4 id="题目要求对传统的外排序方法进行仿真，即给定n个数而同一时间只有给定m个数可以读进内存进行比较。"><a href="#题目要求对传统的外排序方法进行仿真，即给定n个数而同一时间只有给定m个数可以读进内存进行比较。" class="headerlink" title="题目要求对传统的外排序方法进行仿真，即给定n个数而同一时间只有给定m个数可以读进内存进行比较。"></a>题目要求对传统的外排序方法进行仿真，即给定n个数而同一时间只有给定m个数可以读进内存进行比较。</h4><h4 id="以本题为例：n-13-m-3，数据为：81-94-11-96-12-99-17-35-28-58-41-75-15"><a href="#以本题为例：n-13-m-3，数据为：81-94-11-96-12-99-17-35-28-58-41-75-15" class="headerlink" title="以本题为例：n = 13,m = 3，数据为：81 94 11 96 12 99 17 35 28 58 41 75 15"></a>以本题为例：n = 13,m = 3，数据为：81 94 11 96 12 99 17 35 28 58 41 75 15</h4><h4 id="第一轮：输出-11-81-94-96-99"><a href="#第一轮：输出-11-81-94-96-99" class="headerlink" title="第一轮：输出 11 81 94 96 99"></a>第一轮：输出 11 81 94 96 99</h4><p>1、首先读入81、94、11</p>
<p>2、当前内存中为【81、94、11】，输出最小的11，读入96，因为96 &gt;= 11,96入内存</p>
<p>3、当前内存中为【81、94、96】，输出最小的81，读入12，因为12 &lt; 81,12进内存却不在当前回合处理（即占了一个坑不动了）</p>
<p>4、当前内存中为【<strong>12</strong>、94、96】，输出最小的94，读入99，因为99 &gt;= 94,99入内存</p>
<p>5、当前内存中为【<strong>12</strong>、99、96】，输出最小的96，读入17，因为17 &lt; 96,17进内存却不在当前回合处理</p>
<p>6、当前内存中为【<strong>12</strong>、99、<strong>17</strong>】，输出最小的99，读入35，因为35 &lt; 99,35进内存却不在当前回合处理</p>
<p>7.当前内存中为【<strong>12</strong>、<strong>99、17</strong>】，内存全被占了，进入下一轮</p>
<h4 id="第二轮：输出-12-17-28-35-41-58-75"><a href="#第二轮：输出-12-17-28-35-41-58-75" class="headerlink" title="第二轮：输出 12 17 28 35 41 58 75"></a>第二轮：输出 12 17 28 35 41 58 75</h4><h4 id="第三轮：输出-15"><a href="#第三轮：输出-15" class="headerlink" title="第三轮：输出 15"></a>第三轮：输出 15</h4><h2 id="代码设计："><a href="#代码设计：" class="headerlink" title="代码设计："></a>代码设计：</h2><h4 id="我个人认为这题最难的地方在于如何选择与处理合适的存储结构来表示这种算法，即如何处理前一轮剩下的留在内存中的东西和还完全尚未被处理的数据序列中的东西。试想一下，如果我们用一个100000大小的数组预先存储数据，同时设置对应的flag来表示是否已被排序并输出，那么我们相当于每一次都要遍历整个数组，这显然是愚蠢的，并且完全不符合外部排序的定义（就是因为读不进去才会要外排序的……）"><a href="#我个人认为这题最难的地方在于如何选择与处理合适的存储结构来表示这种算法，即如何处理前一轮剩下的留在内存中的东西和还完全尚未被处理的数据序列中的东西。试想一下，如果我们用一个100000大小的数组预先存储数据，同时设置对应的flag来表示是否已被排序并输出，那么我们相当于每一次都要遍历整个数组，这显然是愚蠢的，并且完全不符合外部排序的定义（就是因为读不进去才会要外排序的……）" class="headerlink" title="我个人认为这题最难的地方在于如何选择与处理合适的存储结构来表示这种算法，即如何处理前一轮剩下的留在内存中的东西和还完全尚未被处理的数据序列中的东西。试想一下，如果我们用一个100000大小的数组预先存储数据，同时设置对应的flag来表示是否已被排序并输出，那么我们相当于每一次都要遍历整个数组，这显然是愚蠢的，并且完全不符合外部排序的定义（就是因为读不进去才会要外排序的……）"></a>我个人认为这题最难的地方在于如何选择与处理合适的存储结构来表示这种算法，即如何处理前一轮剩下的留在内存中的东西和还完全尚未被处理的数据序列中的东西。试想一下，如果我们用一个100000大小的数组预先存储数据，同时设置对应的flag来表示是否已被排序并输出，那么我们相当于每一次都要遍历整个数组，这显然是愚蠢的，并且完全不符合外部排序的定义（就是因为读不进去才会要外排序的……）</h4><h4 id="所以读入仅在需要的时候读入，一次只读一个，不预先存储。采取一个队列dirt来存储被读入内存却未曾处理的内容，设计优先队列来处理内存中数据（自己写一个堆排序也行，priority-queue本质上就是堆排序实现的。但要注意不能每一次都sort一下，因为我们的每一次新加入一个元素后的新序列是一个基本有序的序列，sort内部实现是快排会退化，而堆排每一次只要进行一次adjust-down的一个局部调整就行）"><a href="#所以读入仅在需要的时候读入，一次只读一个，不预先存储。采取一个队列dirt来存储被读入内存却未曾处理的内容，设计优先队列来处理内存中数据（自己写一个堆排序也行，priority-queue本质上就是堆排序实现的。但要注意不能每一次都sort一下，因为我们的每一次新加入一个元素后的新序列是一个基本有序的序列，sort内部实现是快排会退化，而堆排每一次只要进行一次adjust-down的一个局部调整就行）" class="headerlink" title="所以读入仅在需要的时候读入，一次只读一个，不预先存储。采取一个队列dirt来存储被读入内存却未曾处理的内容，设计优先队列来处理内存中数据（自己写一个堆排序也行，priority_queue本质上就是堆排序实现的。但要注意不能每一次都sort一下，因为我们的每一次新加入一个元素后的新序列是一个基本有序的序列，sort内部实现是快排会退化，而堆排每一次只要进行一次adjust_down的一个局部调整就行）"></a>所以读入仅在需要的时候读入，一次只读一个，不预先存储。采取一个队列dirt来存储被读入内存却未曾处理的内容，设计优先队列来处理内存中数据（自己写一个堆排序也行，priority_queue本质上就是堆排序实现的。但要注意不能每一次都sort一下，因为我们的每一次新加入一个元素后的新序列是一个基本有序的序列，sort内部实现是快排会退化，而堆排每一次只要进行一次adjust_down的一个局部调整就行）</h4><h4 id="输出要预先存储，不能即使输出。（因为PAT有最后不能多一个空格的设定，即时输出会报格式错误）"><a href="#输出要预先存储，不能即使输出。（因为PAT有最后不能多一个空格的设定，即时输出会报格式错误）" class="headerlink" title="输出要预先存储，不能即使输出。（因为PAT有最后不能多一个空格的设定，即时输出会报格式错误）"></a>输出要预先存储，不能即使输出。（因为PAT有最后不能多一个空格的设定，即时输出会报格式错误）</h4><h2 id="模块设计："><a href="#模块设计：" class="headerlink" title="模块设计："></a>模块设计：</h2><h4 id="1-next-val-：返回下一次将要被读入的数据，同时需要维护两个bool量，以维持正常的读入秩序"><a href="#1-next-val-：返回下一次将要被读入的数据，同时需要维护两个bool量，以维持正常的读入秩序" class="headerlink" title="1.next_val ()：返回下一次将要被读入的数据，同时需要维护两个bool量，以维持正常的读入秩序"></a>1.next_val ()：返回下一次将要被读入的数据，同时需要维护两个bool量，以维持正常的读入秩序</h4><h4 id="2-main：处理输入，同时处理next-val返回的值，加入合适的队列，同时维系答案的存储。"><a href="#2-main：处理输入，同时处理next-val返回的值，加入合适的队列，同时维系答案的存储。" class="headerlink" title="2.main：处理输入，同时处理next_val返回的值，加入合适的队列，同时维系答案的存储。"></a>2.main：处理输入，同时处理next_val返回的值，加入合适的队列，同时维系答案的存储。</h4><h2 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h2><h4 id="1、flag-true，意为上一轮遗留的已经处理干净了"><a href="#1、flag-true，意为上一轮遗留的已经处理干净了" class="headerlink" title="1、flag = true，意为上一轮遗留的已经处理干净了"></a>1、flag = true，意为上一轮遗留的已经处理干净了</h4><h4 id="2、flag2-true，意为上一轮还有遗留，一旦其变为false，只有下一轮读入时才会重新变为true，防止把本该下一轮的又读回去（flag与flag2可以合并，但是逻辑不是很好处理，容易出错）"><a href="#2、flag2-true，意为上一轮还有遗留，一旦其变为false，只有下一轮读入时才会重新变为true，防止把本该下一轮的又读回去（flag与flag2可以合并，但是逻辑不是很好处理，容易出错）" class="headerlink" title="2、flag2 = true，意为上一轮还有遗留，一旦其变为false，只有下一轮读入时才会重新变为true，防止把本该下一轮的又读回去（flag与flag2可以合并，但是逻辑不是很好处理，容易出错）"></a>2、flag2 = true，意为上一轮还有遗留，一旦其变为false，只有下一轮读入时才会重新变为true，防止把本该下一轮的又读回去（flag与flag2可以合并，但是逻辑不是很好处理，容易出错）</h4><h4 id="3、total标识读入了多少个数，当total-gt-n时应该直接返回，防止程序卡死"><a href="#3、total标识读入了多少个数，当total-gt-n时应该直接返回，防止程序卡死" class="headerlink" title="3、total标识读入了多少个数，当total &gt; n时应该直接返回，防止程序卡死"></a>3、total标识读入了多少个数，当total &gt; n时应该直接返回，防止程序卡死</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> <span class="meta-keyword">warning</span>(disable:4996) <span class="comment">//因为是在VS2019中进行编译，所以要取消编译器的限制</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">1000000000</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n, m, pre, layer = <span class="number">0</span>, total = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">bool</span> flag = <span class="literal">false</span>, flag2 = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">priority_queue</span> &lt;<span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;, greater&lt;<span class="keyword">int</span>&gt;&gt; q;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; dirt;<span class="comment">//下一轮的数据在这里</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans[<span class="number">300</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">next_val</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> temp_val;</span><br><span class="line">	<span class="keyword">if</span> (!dirt.empty() &amp;&amp; flag2) &#123;</span><br><span class="line">		temp_val = dirt.front();</span><br><span class="line">		dirt.pop();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		flag2 = <span class="literal">false</span>;</span><br><span class="line">		flag = <span class="literal">true</span>;</span><br><span class="line">		total++;</span><br><span class="line">		<span class="keyword">if</span> (total &gt; n)</span><br><span class="line">			<span class="keyword">return</span> INF;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;temp_val);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> temp_val;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">		flag2 = <span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; m;i++) &#123;</span><br><span class="line">			<span class="keyword">int</span> temp = next_val();</span><br><span class="line">			<span class="keyword">if</span> (total &gt; n &amp;&amp; flag)</span><br><span class="line">			&#123;</span><br><span class="line">				flag = <span class="literal">false</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			q.push(temp);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">while</span> (!q.empty()) &#123;</span><br><span class="line">			pre = q.top();</span><br><span class="line">			ans[layer].push_back(pre);</span><br><span class="line">			q.pop();</span><br><span class="line">			<span class="keyword">int</span> val = next_val();</span><br><span class="line">			<span class="keyword">if</span> (flag &amp;&amp; total &gt; n)&#123;</span><br><span class="line">				flag = <span class="literal">false</span>;</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (val &gt;= pre) &#123;</span><br><span class="line">				q.push(val);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> &#123;</span><br><span class="line">				dirt.push(val);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (dirt.empty())</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			layer++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//输出模块</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt;= layer;i++) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; ans[i].size();j++) &#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; ans[i][j];</span><br><span class="line">			<span class="keyword">if</span> (j != ans[i].size() - <span class="number">1</span>) &#123;</span><br><span class="line">				<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>rainingapple
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://rainingapple.cn/2020/09/27/PAT%E7%94%B2%E7%BA%A72020%E6%98%A504%E9%A2%98%E8%A7%A3/" title="PAT甲级2020春04题解">http://rainingapple.cn/2020/09/27/PAT甲级2020春04题解/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/PAT%E7%94%B2%E7%BA%A7/" rel="tag"># PAT甲级</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/09/23/CCF-CSP%E8%AE%A4%E8%AF%81/" rel="prev" title="CCF-CSP认证">
      <i class="fa fa-chevron-left"></i> CCF-CSP认证
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/09/27/LeetCode-235-%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88/" rel="next" title="LeetCode-235-最近公共祖先">
      LeetCode-235-最近公共祖先 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Input-Specification"><span class="nav-number">1.</span> <span class="nav-text">Input Specification:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Output-Specification"><span class="nav-number">2.</span> <span class="nav-text">Output Specification:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sample-Input"><span class="nav-number">3.</span> <span class="nav-text">Sample Input:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sample-Output"><span class="nav-number">4.</span> <span class="nav-text">Sample Output:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E8%A7%A3%E9%87%8A%EF%BC%9A"><span class="nav-number"></span> <span class="nav-text">题目解释：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E8%A6%81%E6%B1%82%E5%AF%B9%E4%BC%A0%E7%BB%9F%E7%9A%84%E5%A4%96%E6%8E%92%E5%BA%8F%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E4%BB%BF%E7%9C%9F%EF%BC%8C%E5%8D%B3%E7%BB%99%E5%AE%9An%E4%B8%AA%E6%95%B0%E8%80%8C%E5%90%8C%E4%B8%80%E6%97%B6%E9%97%B4%E5%8F%AA%E6%9C%89%E7%BB%99%E5%AE%9Am%E4%B8%AA%E6%95%B0%E5%8F%AF%E4%BB%A5%E8%AF%BB%E8%BF%9B%E5%86%85%E5%AD%98%E8%BF%9B%E8%A1%8C%E6%AF%94%E8%BE%83%E3%80%82"><span class="nav-number">0.1.</span> <span class="nav-text">题目要求对传统的外排序方法进行仿真，即给定n个数而同一时间只有给定m个数可以读进内存进行比较。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A5%E6%9C%AC%E9%A2%98%E4%B8%BA%E4%BE%8B%EF%BC%9An-13-m-3%EF%BC%8C%E6%95%B0%E6%8D%AE%E4%B8%BA%EF%BC%9A81-94-11-96-12-99-17-35-28-58-41-75-15"><span class="nav-number">0.2.</span> <span class="nav-text">以本题为例：n &#x3D; 13,m &#x3D; 3，数据为：81 94 11 96 12 99 17 35 28 58 41 75 15</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E8%BD%AE%EF%BC%9A%E8%BE%93%E5%87%BA-11-81-94-96-99"><span class="nav-number">0.3.</span> <span class="nav-text">第一轮：输出 11 81 94 96 99</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E8%BD%AE%EF%BC%9A%E8%BE%93%E5%87%BA-12-17-28-35-41-58-75"><span class="nav-number">0.4.</span> <span class="nav-text">第二轮：输出 12 17 28 35 41 58 75</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E8%BD%AE%EF%BC%9A%E8%BE%93%E5%87%BA-15"><span class="nav-number">0.5.</span> <span class="nav-text">第三轮：输出 15</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E8%AE%BE%E8%AE%A1%EF%BC%9A"><span class="nav-number"></span> <span class="nav-text">代码设计：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%88%91%E4%B8%AA%E4%BA%BA%E8%AE%A4%E4%B8%BA%E8%BF%99%E9%A2%98%E6%9C%80%E9%9A%BE%E7%9A%84%E5%9C%B0%E6%96%B9%E5%9C%A8%E4%BA%8E%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E4%B8%8E%E5%A4%84%E7%90%86%E5%90%88%E9%80%82%E7%9A%84%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84%E6%9D%A5%E8%A1%A8%E7%A4%BA%E8%BF%99%E7%A7%8D%E7%AE%97%E6%B3%95%EF%BC%8C%E5%8D%B3%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E5%89%8D%E4%B8%80%E8%BD%AE%E5%89%A9%E4%B8%8B%E7%9A%84%E7%95%99%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E4%B8%9C%E8%A5%BF%E5%92%8C%E8%BF%98%E5%AE%8C%E5%85%A8%E5%B0%9A%E6%9C%AA%E8%A2%AB%E5%A4%84%E7%90%86%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E4%B8%AD%E7%9A%84%E4%B8%9C%E8%A5%BF%E3%80%82%E8%AF%95%E6%83%B3%E4%B8%80%E4%B8%8B%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%88%91%E4%BB%AC%E7%94%A8%E4%B8%80%E4%B8%AA100000%E5%A4%A7%E5%B0%8F%E7%9A%84%E6%95%B0%E7%BB%84%E9%A2%84%E5%85%88%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%90%8C%E6%97%B6%E8%AE%BE%E7%BD%AE%E5%AF%B9%E5%BA%94%E7%9A%84flag%E6%9D%A5%E8%A1%A8%E7%A4%BA%E6%98%AF%E5%90%A6%E5%B7%B2%E8%A2%AB%E6%8E%92%E5%BA%8F%E5%B9%B6%E8%BE%93%E5%87%BA%EF%BC%8C%E9%82%A3%E4%B9%88%E6%88%91%E4%BB%AC%E7%9B%B8%E5%BD%93%E4%BA%8E%E6%AF%8F%E4%B8%80%E6%AC%A1%E9%83%BD%E8%A6%81%E9%81%8D%E5%8E%86%E6%95%B4%E4%B8%AA%E6%95%B0%E7%BB%84%EF%BC%8C%E8%BF%99%E6%98%BE%E7%84%B6%E6%98%AF%E6%84%9A%E8%A0%A2%E7%9A%84%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%AE%8C%E5%85%A8%E4%B8%8D%E7%AC%A6%E5%90%88%E5%A4%96%E9%83%A8%E6%8E%92%E5%BA%8F%E7%9A%84%E5%AE%9A%E4%B9%89%EF%BC%88%E5%B0%B1%E6%98%AF%E5%9B%A0%E4%B8%BA%E8%AF%BB%E4%B8%8D%E8%BF%9B%E5%8E%BB%E6%89%8D%E4%BC%9A%E8%A6%81%E5%A4%96%E6%8E%92%E5%BA%8F%E7%9A%84%E2%80%A6%E2%80%A6%EF%BC%89"><span class="nav-number">0.1.</span> <span class="nav-text">我个人认为这题最难的地方在于如何选择与处理合适的存储结构来表示这种算法，即如何处理前一轮剩下的留在内存中的东西和还完全尚未被处理的数据序列中的东西。试想一下，如果我们用一个100000大小的数组预先存储数据，同时设置对应的flag来表示是否已被排序并输出，那么我们相当于每一次都要遍历整个数组，这显然是愚蠢的，并且完全不符合外部排序的定义（就是因为读不进去才会要外排序的……）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%80%E4%BB%A5%E8%AF%BB%E5%85%A5%E4%BB%85%E5%9C%A8%E9%9C%80%E8%A6%81%E7%9A%84%E6%97%B6%E5%80%99%E8%AF%BB%E5%85%A5%EF%BC%8C%E4%B8%80%E6%AC%A1%E5%8F%AA%E8%AF%BB%E4%B8%80%E4%B8%AA%EF%BC%8C%E4%B8%8D%E9%A2%84%E5%85%88%E5%AD%98%E5%82%A8%E3%80%82%E9%87%87%E5%8F%96%E4%B8%80%E4%B8%AA%E9%98%9F%E5%88%97dirt%E6%9D%A5%E5%AD%98%E5%82%A8%E8%A2%AB%E8%AF%BB%E5%85%A5%E5%86%85%E5%AD%98%E5%8D%B4%E6%9C%AA%E6%9B%BE%E5%A4%84%E7%90%86%E7%9A%84%E5%86%85%E5%AE%B9%EF%BC%8C%E8%AE%BE%E8%AE%A1%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97%E6%9D%A5%E5%A4%84%E7%90%86%E5%86%85%E5%AD%98%E4%B8%AD%E6%95%B0%E6%8D%AE%EF%BC%88%E8%87%AA%E5%B7%B1%E5%86%99%E4%B8%80%E4%B8%AA%E5%A0%86%E6%8E%92%E5%BA%8F%E4%B9%9F%E8%A1%8C%EF%BC%8Cpriority-queue%E6%9C%AC%E8%B4%A8%E4%B8%8A%E5%B0%B1%E6%98%AF%E5%A0%86%E6%8E%92%E5%BA%8F%E5%AE%9E%E7%8E%B0%E7%9A%84%E3%80%82%E4%BD%86%E8%A6%81%E6%B3%A8%E6%84%8F%E4%B8%8D%E8%83%BD%E6%AF%8F%E4%B8%80%E6%AC%A1%E9%83%BDsort%E4%B8%80%E4%B8%8B%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%88%91%E4%BB%AC%E7%9A%84%E6%AF%8F%E4%B8%80%E6%AC%A1%E6%96%B0%E5%8A%A0%E5%85%A5%E4%B8%80%E4%B8%AA%E5%85%83%E7%B4%A0%E5%90%8E%E7%9A%84%E6%96%B0%E5%BA%8F%E5%88%97%E6%98%AF%E4%B8%80%E4%B8%AA%E5%9F%BA%E6%9C%AC%E6%9C%89%E5%BA%8F%E7%9A%84%E5%BA%8F%E5%88%97%EF%BC%8Csort%E5%86%85%E9%83%A8%E5%AE%9E%E7%8E%B0%E6%98%AF%E5%BF%AB%E6%8E%92%E4%BC%9A%E9%80%80%E5%8C%96%EF%BC%8C%E8%80%8C%E5%A0%86%E6%8E%92%E6%AF%8F%E4%B8%80%E6%AC%A1%E5%8F%AA%E8%A6%81%E8%BF%9B%E8%A1%8C%E4%B8%80%E6%AC%A1adjust-down%E7%9A%84%E4%B8%80%E4%B8%AA%E5%B1%80%E9%83%A8%E8%B0%83%E6%95%B4%E5%B0%B1%E8%A1%8C%EF%BC%89"><span class="nav-number">0.2.</span> <span class="nav-text">所以读入仅在需要的时候读入，一次只读一个，不预先存储。采取一个队列dirt来存储被读入内存却未曾处理的内容，设计优先队列来处理内存中数据（自己写一个堆排序也行，priority_queue本质上就是堆排序实现的。但要注意不能每一次都sort一下，因为我们的每一次新加入一个元素后的新序列是一个基本有序的序列，sort内部实现是快排会退化，而堆排每一次只要进行一次adjust_down的一个局部调整就行）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E8%A6%81%E9%A2%84%E5%85%88%E5%AD%98%E5%82%A8%EF%BC%8C%E4%B8%8D%E8%83%BD%E5%8D%B3%E4%BD%BF%E8%BE%93%E5%87%BA%E3%80%82%EF%BC%88%E5%9B%A0%E4%B8%BAPAT%E6%9C%89%E6%9C%80%E5%90%8E%E4%B8%8D%E8%83%BD%E5%A4%9A%E4%B8%80%E4%B8%AA%E7%A9%BA%E6%A0%BC%E7%9A%84%E8%AE%BE%E5%AE%9A%EF%BC%8C%E5%8D%B3%E6%97%B6%E8%BE%93%E5%87%BA%E4%BC%9A%E6%8A%A5%E6%A0%BC%E5%BC%8F%E9%94%99%E8%AF%AF%EF%BC%89"><span class="nav-number">0.3.</span> <span class="nav-text">输出要预先存储，不能即使输出。（因为PAT有最后不能多一个空格的设定，即时输出会报格式错误）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%EF%BC%9A"><span class="nav-number"></span> <span class="nav-text">模块设计：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-next-val-%EF%BC%9A%E8%BF%94%E5%9B%9E%E4%B8%8B%E4%B8%80%E6%AC%A1%E5%B0%86%E8%A6%81%E8%A2%AB%E8%AF%BB%E5%85%A5%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%90%8C%E6%97%B6%E9%9C%80%E8%A6%81%E7%BB%B4%E6%8A%A4%E4%B8%A4%E4%B8%AAbool%E9%87%8F%EF%BC%8C%E4%BB%A5%E7%BB%B4%E6%8C%81%E6%AD%A3%E5%B8%B8%E7%9A%84%E8%AF%BB%E5%85%A5%E7%A7%A9%E5%BA%8F"><span class="nav-number">0.1.</span> <span class="nav-text">1.next_val ()：返回下一次将要被读入的数据，同时需要维护两个bool量，以维持正常的读入秩序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-main%EF%BC%9A%E5%A4%84%E7%90%86%E8%BE%93%E5%85%A5%EF%BC%8C%E5%90%8C%E6%97%B6%E5%A4%84%E7%90%86next-val%E8%BF%94%E5%9B%9E%E7%9A%84%E5%80%BC%EF%BC%8C%E5%8A%A0%E5%85%A5%E5%90%88%E9%80%82%E7%9A%84%E9%98%9F%E5%88%97%EF%BC%8C%E5%90%8C%E6%97%B6%E7%BB%B4%E7%B3%BB%E7%AD%94%E6%A1%88%E7%9A%84%E5%AD%98%E5%82%A8%E3%80%82"><span class="nav-number">0.2.</span> <span class="nav-text">2.main：处理输入，同时处理next_val返回的值，加入合适的队列，同时维系答案的存储。</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E%EF%BC%9A"><span class="nav-number"></span> <span class="nav-text">说明：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81flag-true%EF%BC%8C%E6%84%8F%E4%B8%BA%E4%B8%8A%E4%B8%80%E8%BD%AE%E9%81%97%E7%95%99%E7%9A%84%E5%B7%B2%E7%BB%8F%E5%A4%84%E7%90%86%E5%B9%B2%E5%87%80%E4%BA%86"><span class="nav-number">0.1.</span> <span class="nav-text">1、flag &#x3D; true，意为上一轮遗留的已经处理干净了</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81flag2-true%EF%BC%8C%E6%84%8F%E4%B8%BA%E4%B8%8A%E4%B8%80%E8%BD%AE%E8%BF%98%E6%9C%89%E9%81%97%E7%95%99%EF%BC%8C%E4%B8%80%E6%97%A6%E5%85%B6%E5%8F%98%E4%B8%BAfalse%EF%BC%8C%E5%8F%AA%E6%9C%89%E4%B8%8B%E4%B8%80%E8%BD%AE%E8%AF%BB%E5%85%A5%E6%97%B6%E6%89%8D%E4%BC%9A%E9%87%8D%E6%96%B0%E5%8F%98%E4%B8%BAtrue%EF%BC%8C%E9%98%B2%E6%AD%A2%E6%8A%8A%E6%9C%AC%E8%AF%A5%E4%B8%8B%E4%B8%80%E8%BD%AE%E7%9A%84%E5%8F%88%E8%AF%BB%E5%9B%9E%E5%8E%BB%EF%BC%88flag%E4%B8%8Eflag2%E5%8F%AF%E4%BB%A5%E5%90%88%E5%B9%B6%EF%BC%8C%E4%BD%86%E6%98%AF%E9%80%BB%E8%BE%91%E4%B8%8D%E6%98%AF%E5%BE%88%E5%A5%BD%E5%A4%84%E7%90%86%EF%BC%8C%E5%AE%B9%E6%98%93%E5%87%BA%E9%94%99%EF%BC%89"><span class="nav-number">0.2.</span> <span class="nav-text">2、flag2 &#x3D; true，意为上一轮还有遗留，一旦其变为false，只有下一轮读入时才会重新变为true，防止把本该下一轮的又读回去（flag与flag2可以合并，但是逻辑不是很好处理，容易出错）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81total%E6%A0%87%E8%AF%86%E8%AF%BB%E5%85%A5%E4%BA%86%E5%A4%9A%E5%B0%91%E4%B8%AA%E6%95%B0%EF%BC%8C%E5%BD%93total-gt-n%E6%97%B6%E5%BA%94%E8%AF%A5%E7%9B%B4%E6%8E%A5%E8%BF%94%E5%9B%9E%EF%BC%8C%E9%98%B2%E6%AD%A2%E7%A8%8B%E5%BA%8F%E5%8D%A1%E6%AD%BB"><span class="nav-number">0.3.</span> <span class="nav-text">3、total标识读入了多少个数，当total &gt; n时应该直接返回，防止程序卡死</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">rainingapple</p>
  <div class="site-description" itemprop="description">划水也要划得自在</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">202</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">41</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">rainingapple</span>
  <span>&nbsp;<a target="_blank" rel="noopener" href="http://beian.miit.gov.cn"> 冀ICP备-2020030169号</a></span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/three-waves.min.js"></script>
    <script defer src="/lib/three/canvas_lines.min.js"></script>
    <script defer src="/lib/three/canvas_sphere.min.js"></script>


  















  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '92659aa3d0b96dcc89ba',
      clientSecret: '0a7caa683d281a88960c565ce4e0dc38c8976a9c',
      repo        : 'my_blog_comment',
      owner       : 'rainingapple',
      admin       : ['rainingapple'],
      id          : '2edc10cc912ae842075aacc4a78c7f49',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

<script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var i=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){i&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,e,a=0;a<r.length;a++)t=r[a],e=void 0,0<=(e=t.getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(n.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body>
</html>
